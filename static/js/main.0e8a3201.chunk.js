(window["webpackJsonpchat-bot"]=window["webpackJsonpchat-bot"]||[]).push([[0],[,,function(e,t,a){e.exports={chat:"Message_chat__1z0vg",botImg:"Message_botImg__2cNLG",chatMessage:"Message_chatMessage__wquIE",imageMessage:"Message_imageMessage__1DVaN",bot:"Message_bot__2ltVA",self:"Message_self__2Deh_",container:"Message_container__1S2Td",dot:"Message_dot__1zuZ-",wave:"Message_wave__Gsw14"}},function(e,t,a){e.exports={chatForm:"Form_chatForm__2AxI0",chatInput:"Form_chatInput__2nX02",chatFormButtons:"Form_chatFormButtons__QVP8R"}},function(e,t,a){e.exports={chatBoxHeader:"Header_chatBoxHeader__16r-Z",icons:"Header_icons__2SSz4",chatBotName:"Header_chatBotName__297om"}},function(e,t,a){e.exports={suggestionContainer:"Suggestions_suggestionContainer__3JJoG",suggestion:"Suggestions_suggestion___lqNm"}},,,function(e,t,a){e.exports={chatBoxContent:"Logs_chatBoxContent__2Ri1g",chatLogs:"Logs_chatLogs__1OWsJ"}},,,function(e,t,a){e.exports={chatButton:"ChatButton_chatButton__skEXu"}},,,function(e,t,a){e.exports={chatBox:"Chat_chatBox__2FQQW"}},,function(e,t,a){e.exports=a(23)},,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(10),r=a.n(c),s=(a(21),a(1)),i=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),a=Object(s.a)(t,2),o=a[0],c=a[1],r=function(){return c((function(e){return!e}))};return[o,r]};a(6);function u(e){var t=e.type,a=void 0===t?"fas":t,n=e.name,c=e.onClick;return o.a.createElement("i",{className:"".concat(a," ").concat(n),onClick:c})}var l=a(11),m=a.n(l);function g(e){var t=e.toggleChatBox;return o.a.createElement("div",{className:m.a.chatButton,onClick:t},o.a.createElement(u,{type:"fas",name:"fa-comments"}))}var h=a(7),p=a(15),f=function(e){return e[Math.floor(Math.random()*e.length)]},d={text:"".concat(f(["hello","hey","hey there","hello there"]),", ").concat(f(["my name is","i am"])," ").concat("krypto"," ! what would you like to know about?"),user:"bot"},v=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=Object(n.useState)([d]||!1),t=Object(s.a)(e,2),a=t[0],o=t[1],c=function(e,t,a){return o((function(n){var o;return[].concat(Object(p.a)(n),[(o={},Object(h.a)(o,e,t),Object(h.a)(o,"user",a),o)])}))};return[a,c]},_=a(12),b=a.n(_),E=a(13),x=a.n(E),y=a(4),w=a.n(y);function B(e){var t=e.toggleChatBox,a=e.speechOutput,n=e.toggleSpeechOutput;return o.a.createElement("div",{className:w.a.chatBoxHeader},o.a.createElement("h4",{className:w.a.chatBotName},"Chat Bot"),o.a.createElement("div",{className:w.a.icons},o.a.createElement(u,{name:"fa-".concat(a?"volume-up":"volume-mute"),onClick:n}),o.a.createElement(u,{name:"fa-minus",onClick:t})))}var N=a(2),O=a.n(N),j=Object(n.memo)((function(e){var t=e.text,a=void 0===t?"":t,n=e.image,c=e.user,r=e.typingIndicator,s=O.a.chat,i=O.a.bot,u=O.a.self,l=O.a.botImg,m=O.a.chatMessage,g=O.a.imageMessage;return o.a.createElement("div",{className:"".concat(s," ").concat("bot"===c?i:u)},"bot"===c&&o.a.createElement("div",{className:l},o.a.createElement("img",{src:"https://i.ibb.co/cDCL67q/bot.png",alt:"bot"})),r&&o.a.createElement("div",{className:O.a.container},o.a.createElement("span",{className:O.a.dot}),o.a.createElement("span",{className:O.a.dot}),o.a.createElement("span",{className:O.a.dot})),a&&o.a.createElement("p",{className:m},a),n&&o.a.createElement("img",{className:g,src:n,alt:"requested"}))})),k=a(8),C=a.n(k);function S(e){var t=e.log,a=e.typingIndicator,c=Object(n.useRef)();return Object(n.useEffect)((function(){return c.current.scrollIntoView({behavior:"smooth"})})),o.a.createElement("div",{className:C.a.chatBoxContent},o.a.createElement("div",{className:C.a.chatLogs},t.map((function(e,t){var a=e.text,n=e.user,c=e.image;return o.a.createElement(j,{key:t,text:a,user:n,image:c})})),a&&o.a.createElement(j,{key:"typing",user:"bot",typingIndicator:!0}),o.a.createElement("div",{ref:c})))}var I=a(5),M=a.n(I),F=Object(n.memo)((function(e){var t=e.suggestions,a=e.handleSubmit;return 0===t.length?null:o.a.createElement("div",{className:M.a.suggestionContainer},t.map((function(e,t){return o.a.createElement("div",{key:e+t,className:M.a.suggestion,onClick:function(){return a(e)}},o.a.createElement("p",{className:M.a.suggestionMessage},e))})))})),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useState)(e),a=Object(s.a)(t,2),o=a[0],c=a[1],r=function(e){return c(e.target.value)},i=function(){return c("")};return[o,r,i]},q=a(3),G=a.n(q);function T(e){var t=e.handleSubmit,a=e.speechInput,n=e.toggleSpeechInput,c=L(),r=Object(s.a)(c,3),i=r[0],l=r[1],m=r[2];return o.a.createElement("div",{className:G.a.chatForm},o.a.createElement("div",{className:G.a.chatInput},o.a.createElement("textarea",{value:i,placeholder:a?"Say Something ...":"Type a message",disabled:a,onChange:function(e){"insertLineBreak"===e.nativeEvent.inputType?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;t(e),m()}():l(e)},rows:"1","data-min-rows":"1",className:G.a.input,autoFocus:!0})),o.a.createElement("div",{className:G.a.chatFormButtons},o.a.createElement(u,{name:"fa-".concat(a?"microphone":"microphone-slash"),onClick:n})))}var z={url:"https://api.dialogflow.com/v1/query?v=20150910",accessToken:"38578c4faf424691a4540abffe6a1ec8",sessionId:"izqGQrUr7FItDPD1XVKuVxGbiDBRNspylOSwfNfA"},D={volume:1,lang:"en-GB",rate:1,pitch:1,voice:"Google UK English Female"},H=a(14),J=a.n(H);function V(e){var t=e.open,a=e.toggleChatBox,c=new x.a,r=new window.webkitSpeechRecognition;c.init(D).catch((function(e){return console.error("An error occured while initializing Speech : ",e)})),r.onresult=function(e){for(var t="",a=e.resultIndex;a<e.results.length;++a)t+=e.results[a][0].transcript;H(t),q("text",t,"user"),w()};var u=v(),l=Object(s.a)(u,2),m=l[0],g=l[1],h=Object(n.useState)([]),p=Object(s.a)(h,2),f=p[0],d=p[1],_=i(),E=Object(s.a)(_,2),y=E[0],w=E[1],N=i(),O=Object(s.a)(N,2),j=O[0],k=O[1],C=i(!0),I=Object(s.a)(C,2),M=I[0],L=I[1];Object(n.useEffect)(c.cancel,[M]),Object(n.useEffect)((function(){return y?r.start():r.stop()}),[y]);var q=function(e,t,a){"bot"===a&&(k(),M&&"image"!==e&&c.speak({text:t})),g(e,t,a)},G=function(e){H(e),q("text",e,"user"),k()},H=function(e){var t=z.url,a=z.accessToken,n=z.sessionId;b.a.post({url:t,contentType:"application/json; charset=utf-8",dataType:"json",headers:{Authorization:"Bearer ".concat(a)},data:JSON.stringify({query:e,lang:"en",sessionId:n})}).then((function(e){return V(e.result.fulfillment.speech)})).catch((function(){return q("text","it seems like there's something wrong. could you try again later?","bot")}))},V=function(e){e.includes("<ar>")?A(e):e.includes("<br>")?R(e):e.includes("<img>")?Q(e):q("text",e,"bot")},A=function(e){R(e.split(/<ar>/)[0]),d([]),d(e.split(/<ar>/).splice(1))},R=function(e){e.includes("<img>")&&Q(e.split(/<br>/)[0]);var t=e.split(/<br>/).splice(1),a=!0,n=!1,o=void 0;try{for(var c,r=t[Symbol.iterator]();!(a=(c=r.next()).done);a=!0){var s=c.value;q("text",s,"bot")}}catch(i){n=!0,o=i}finally{try{a||null==r.return||r.return()}finally{if(n)throw o}}},Q=function(e){return q("image",e.split(/<img>/)[1],"bot")};return o.a.createElement("div",{className:J.a.chatBox,style:{display:t?"block":"none"}},o.a.createElement(B,{toggleChatBox:a,speechOutput:M,toggleSpeechOutput:L}),o.a.createElement(S,{log:m,typingIndicator:j}),o.a.createElement(F,{suggestions:f,handleSubmit:G}),o.a.createElement(T,{speechInput:y,toggleSpeechInput:w,handleSubmit:G}))}var A=function(){var e=i(!0),t=Object(s.a)(e,2),a=t[0],c=t[1];return o.a.createElement(n.Fragment,null,o.a.createElement(g,{toggleChatBox:c,open:a}),o.a.createElement(V,{toggleChatBox:c,open:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[16,1,2]]]);
//# sourceMappingURL=main.0e8a3201.chunk.js.map